{{- $params := default site.Params.hb.header.banner .Params.header.banner }}
{{- with $params }}
  {{- $sources := slice }}
  {{- $img := "" }}
  {{- if reflect.IsSlice .img }}
    {{- range .img }}
      {{- if .media }}
        {{- $sources = $sources | append . }}
      {{- else }}
        {{- $img = .src | relURL }}
      {{- end }}
    {{- end }}
  {{- else if .img }}
    {{- $img = relURL .img }}
    {{- with $.Resources.GetMatch .img }}
      {{- $img = .RelPermalink }}
    {{- else }}
      {{- with resources.GetMatch .img }}
        {{- $img = .RelPermalink }}
      {{- end }}
    {{- end }}
  {{- end }}
  <style>
    .hb-header {
      height: 100vh;
    }
  </style>
  {{- if $img }}
    <picture>
      {{- range $sources }}
        <source
          srcset="{{ .src }}"
          media="{{ .media }}"
          {{ with .type }}type="{{ . }}"{{ end }}/>
      {{- end }}
      <img
        class="img-fluid hb-header-banner-img d-block w-100 position-absolute top-0"
        onload="document.querySelector('.hb-header').classList.add('hb-header-banner')"
        alt="{{ $.Title }}"
        src="{{ $img }}" />
    </picture>
  {{- end }}
  {{- with .video }}
  <video
    class="hb-header-banner-video position-absolute top-0 w-100"
    onloadstart="document.querySelector('.hb-header').classList.add('hb-header-banner')"
    {{ if default true .muted }}muted{{ end }}
    loop
    autoplay>
    <source src="{{ .src }}">
  </video>
  {{- end }}
  <div class="hb-header-banner col d-flex flex-column justify-content-center text-white z-1 position-absolute top-0 w-100">
    <div class="container">
      <div class="row">
        <div class="col col-lg-8">
          <h1 class="display-1">{{ default $.Title .title | markdownify }}</h1>
          <div class="lead">{{ default $.Description .description | markdownify }}</div>
        </div>
      </div>
    </div>
  </div>
{{- end }}
